{"version":3,"sources":["../../src/index.js","App.js","rotate.png","scale.png","reportWebVitals.js","index.js"],"names":["SRMode","SRCenter","parseSRCenter","value","defaultSRCenter","undefined","Error","onSetup","opts","featureId","featureIds","Array","isArray","length","feature","this","getFeature","type","Constants","POINT","MULTI_POINT","TypeError","state","canTrash","canScale","canRotate","singleRotationPoint","rotationPointRadius","rotatePivot","scaleCenter","canSelectFeatures","dragMoveLocation","startPos","dragMoving","canDragMove","selectedCoordPaths","coordPath","console","warn","setSelectedCoordinates","pathsToCoordinates","setSelected","doubleClickZoom","disable","setActionableState","combineFeatures","uncombineFeatures","trash","toDisplayFeatures","geojson","push","properties","id","active","ACTIVE","suppPoints","createSupplementaryPoints","map","midpoints","selectedPaths","computeBisectrix","forEach","createRotationPoints","INACTIVE","onStop","enable","clearSelectedCoordinates","paths","coord_path","feature_id","points","i1","i0","i2","a","lineString","geometry","coordinates","bearing","heading","_createRotationPoint","rotationWidgets","v1","v2","rotCenter","radiusScale","cR0","midpoint","distance1","distance","cR1","destination","FEATURE","meta","MIDPOINT","icon","parent","lng","lat","corners","slice","computeRotationCenter","startDragging","e","dragPan","lngLat","stopDragging","isRotatePoint","CommonSelectors","isVertex","VERTEX","onTouchStart","onMouseDown","onVertex","onRotatePoint","onFeature","TxMode","computeAxes","toGeoJSON","about","featureTarget","txMode","coordinateIndex","coordPaths","parts","split","parseInt","polygon","center","center0","POLYGON","MULTI_POLYGON","temp","c","c2","c3","LINE_STRING","MULTI_LINE_STRING","log","n","iHalf","Math","floor","rotateCenters","headings","c0","c1","rotPoint","point","i3","rotation","feature0","centers","scaleCenters","distances","i","units","scaling","onDrag","originalEvent","stopPropagation","delta","dragRotatePoint","dragScalePoint","dragFeature","m1","cIdx","cCenter","rotateAngle","round","rotatedFeature","transformRotate","pivot","mutate","incomingCoords","fireUpdate","error","scale","scaledFeature","transformScale","origin","moveFeatures","getSelected","fire","UPDATE","action","CHANGE_COORDINATES","features","f","onMouseOut","onTouchEnd","onMouseUp","clickActiveFeature","changed","onClick","clickNoTarget","clickInactive","changeMode","SIMPLE_SELECT","onTrash","deleteFeature","getSelectedIds","draw","drawBar","extendDrawBar","opt","ctrl","buttons","onAddOrig","onAdd","onRemoveOrig","onRemove","elContainer","b","addButton","removeButton","elButton","document","createElement","className","classes","classList","add","addEventListener","on","appendChild","removeEventListener","remove","drawStyle","filter","paint","layout","delay","duration","App","mapboxGl","getRTLTextPluginStatus","setRTLTextPlugin","err","mapRef","useRef","useEffect","Map","container","current","style","zoom","pitch","interactive","hash","attributionControl","customAttribution","transformRequest","url","headers","MapboxDraw","modes","scaleRotateMode","styles","userProperties","scaleRotate","once","resize","loadImage","image","addImage","addControl","set","alert","message","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.887f6439.chunk.js","sourcesContent":["import * as Constants from '@mapbox/mapbox-gl-draw/src/constants';\nimport doubleClickZoom from '@mapbox/mapbox-gl-draw/src/lib/double_click_zoom';\nimport createSupplementaryPoints from '@mapbox/mapbox-gl-draw/src/lib/create_supplementary_points';\nimport * as CommonSelectors from '@mapbox/mapbox-gl-draw/src/lib/common_selectors';\nimport moveFeatures from '@mapbox/mapbox-gl-draw/src/lib/move_features';\n\nimport { lineString, point } from '@turf/helpers';\nimport bearing from '@turf/bearing';\nimport center from '@turf/center';\nimport midpoint from '@turf/midpoint';\nimport distance from '@turf/distance';\nimport destination from '@turf/destination';\nimport transformRotate from '@turf/transform-rotate';\nimport transformScale from '@turf/transform-scale';\n\nexport const SRMode = {}; //scale rotate mode\n\nexport const SRCenter = {\n  Center: 0, // rotate or scale around center of polygon\n  Opposite: 1, // rotate or scale around opposite side of polygon\n};\n\nfunction parseSRCenter(value, defaultSRCenter = SRCenter.Center) {\n  if (value == undefined || value == null) return defaultSRCenter;\n\n  if (value === SRCenter.Center || value === SRCenter.Opposite) return value;\n\n  if (value == 'center') return SRCenter.Center;\n\n  if (value == 'opposite') return SRCenter.Opposite;\n\n  throw Error('Invalid SRCenter: ' + value);\n}\n\n/*\n    opts = {\n        featureId: ...,\n\n        canScale: default true,\n        canRotate: default true,\n\n        rotatePivot: default 'center' or 'opposite',\n        scaleCenter: default 'center' or 'opposite',\n\n        canSelectFeatures: default true,    // can exit to simple_select mode\n    }\n */\nSRMode.onSetup = function (opts) {\n  const featureId =\n    opts.featureIds &&\n    Array.isArray(opts.featureIds) &&\n    opts.featureIds.length > 0\n      ? opts.featureIds[0]\n      : opts.featureId;\n\n  const feature = this.getFeature(featureId);\n\n  if (!feature) {\n    throw new Error('You must provide a valid featureId to enter tx_poly mode');\n  }\n\n  if (\n    feature.type === Constants.geojsonTypes.POINT ||\n    feature.type === Constants.geojsonTypes.MULTI_POINT\n  ) {\n    throw new TypeError('tx_poly mode can not handle points');\n  }\n  //   if (\n  //     feature.coordinates === undefined ||\n  //     feature.coordinates.length != 1 ||\n  //     feature.coordinates[0].length <= 2\n  //   ) {\n  //     throw new TypeError('tx_poly mode can only handle polygons');\n  //   }\n\n  const state = {\n    featureId,\n    feature,\n\n    canTrash: opts.canTrash != undefined ? opts.canTrash : true,\n\n    canScale: opts.canScale != undefined ? opts.canScale : true,\n    canRotate: opts.canRotate != undefined ? opts.canRotate : true,\n\n    singleRotationPoint:\n      opts.singleRotationPoint != undefined ? opts.singleRotationPoint : false,\n    rotationPointRadius:\n      opts.rotationPointRadius != undefined ? opts.rotationPointRadius : 1.0,\n\n    rotatePivot: parseSRCenter(opts.rotatePivot, SRCenter.Center),\n    scaleCenter: parseSRCenter(opts.scaleCenter, SRCenter.Center),\n\n    canSelectFeatures:\n      opts.canSelectFeatures != undefined ? opts.canSelectFeatures : true,\n    // selectedFeatureMode: opts.selectedFeatureMode != undefined ? opts.selectedFeatureMode : 'simple_select',\n\n    dragMoveLocation: opts.startPos || null,\n    dragMoving: false,\n    canDragMove: false,\n    selectedCoordPaths: opts.coordPath ? [opts.coordPath] : [],\n  };\n\n  if (!(state.canRotate || state.canScale)) {\n    console.warn('Non of canScale or canRotate is true');\n  }\n\n  this.setSelectedCoordinates(\n    this.pathsToCoordinates(featureId, state.selectedCoordPaths)\n  );\n  this.setSelected(featureId);\n  doubleClickZoom.disable(this);\n\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.canTrash,\n  });\n\n  return state;\n};\n\nSRMode.toDisplayFeatures = function (state, geojson, push) {\n  if (state.featureId === geojson.properties.id) {\n    geojson.properties.active = Constants.activeStates.ACTIVE;\n    push(geojson);\n\n    var suppPoints = createSupplementaryPoints(geojson, {\n      map: this.map,\n      midpoints: false,\n      selectedPaths: state.selectedCoordPaths,\n    });\n\n    if (state.canScale) {\n      this.computeBisectrix(suppPoints);\n      suppPoints.forEach(push);\n    }\n\n    if (state.canRotate) {\n      var rotPoints = this.createRotationPoints(state, geojson, suppPoints);\n      rotPoints.forEach(push);\n    }\n  } else {\n    geojson.properties.active = Constants.activeStates.INACTIVE;\n    push(geojson);\n  }\n\n  // this.fireActionable(state);\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.canTrash,\n  });\n\n  // this.fireUpdate();\n};\n\nSRMode.onStop = function () {\n  doubleClickZoom.enable(this);\n  this.clearSelectedCoordinates();\n};\n\n// TODO why I need this?\nSRMode.pathsToCoordinates = function (featureId, paths) {\n  return paths.map((coord_path) => {\n    return { feature_id: featureId, coord_path };\n  });\n};\n\nSRMode.computeBisectrix = function (points) {\n  for (var i1 = 0; i1 < points.length; i1++) {\n    var i0 = (i1 - 1 + points.length) % points.length;\n    var i2 = (i1 + 1) % points.length;\n\n    var l1 = lineString([\n      points[i0].geometry.coordinates,\n      points[i1].geometry.coordinates,\n    ]);\n    var l2 = lineString([\n      points[i1].geometry.coordinates,\n      points[i2].geometry.coordinates,\n    ]);\n    var a1 = bearing(\n      points[i0].geometry.coordinates,\n      points[i1].geometry.coordinates\n    );\n    var a2 = bearing(\n      points[i2].geometry.coordinates,\n      points[i1].geometry.coordinates\n    );\n\n    var a = (a1 + a2) / 2.0;\n\n    if (a < 0.0) a += 360;\n    if (a > 360) a -= 360;\n\n    points[i1].properties.heading = a;\n  }\n};\n\nSRMode._createRotationPoint = function (\n  rotationWidgets,\n  featureId,\n  v1,\n  v2,\n  rotCenter,\n  radiusScale\n) {\n  var cR0 = midpoint(v1, v2).geometry.coordinates;\n  var heading = bearing(rotCenter, cR0);\n  var distance0 = distance(rotCenter, cR0);\n  var distance1 = radiusScale * distance0; // TODO depends on map scale\n  var cR1 = destination(rotCenter, distance1, heading, {}).geometry.coordinates;\n\n  rotationWidgets.push({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      meta: Constants.meta.MIDPOINT,\n      icon: 'rotate',\n      parent: featureId,\n      lng: cR1[0],\n      lat: cR1[1],\n      coord_path: v1.properties.coord_path,\n      heading: heading,\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: cR1,\n    },\n  });\n};\n\nSRMode.createRotationPoints = function (state, geojson, suppPoints) {\n  const { type, coordinates } = geojson.geometry;\n  const featureId = geojson.properties && geojson.properties.id;\n\n  let rotationWidgets = [];\n  if (\n    type === Constants.geojsonTypes.POINT ||\n    type === Constants.geojsonTypes.MULTI_POINT\n  ) {\n    return;\n  }\n\n  var corners = suppPoints.slice(0);\n  corners[corners.length] = corners[0];\n\n  var v1 = null;\n\n  var rotCenter = this.computeRotationCenter(state, geojson);\n\n  if (state.singleRotationPoint) {\n    this._createRotationPoint(\n      rotationWidgets,\n      featureId,\n      corners[0],\n      corners[1],\n      rotCenter,\n      state.rotationPointRadius\n    );\n  } else {\n    corners.forEach((v2) => {\n      if (v1 != null) {\n        this._createRotationPoint(\n          rotationWidgets,\n          featureId,\n          v1,\n          v2,\n          rotCenter,\n          state.rotationPointRadius\n        );\n      }\n\n      v1 = v2;\n    });\n  }\n  return rotationWidgets;\n};\n\nSRMode.startDragging = function (state, e) {\n  this.map.dragPan.disable();\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nSRMode.stopDragging = function (state) {\n  this.map.dragPan.enable();\n  state.dragMoving = false;\n  state.canDragMove = false;\n  state.dragMoveLocation = null;\n};\n\nconst isRotatePoint = CommonSelectors.isOfMetaType(Constants.meta.MIDPOINT);\nconst isVertex = CommonSelectors.isOfMetaType(Constants.meta.VERTEX);\n\nSRMode.onTouchStart = SRMode.onMouseDown = function (state, e) {\n  if (isVertex(e)) return this.onVertex(state, e);\n  if (isRotatePoint(e)) return this.onRotatePoint(state, e);\n  if (CommonSelectors.isActiveFeature(e)) return this.onFeature(state, e);\n  // if (isMidpoint(e)) return this.onMidpoint(state, e);\n};\n\nconst TxMode = {\n  Scale: 1,\n  Rotate: 2,\n};\n\nSRMode.onVertex = function (state, e) {\n  // convert internal MapboxDraw feature to valid GeoJSON:\n  this.computeAxes(state, state.feature.toGeoJSON());\n\n  this.startDragging(state, e);\n  const about = e.featureTarget.properties;\n  state.selectedCoordPaths = [about.coord_path];\n  state.txMode = TxMode.Scale;\n};\n\nSRMode.onRotatePoint = function (state, e) {\n  // convert internal MapboxDraw feature to valid GeoJSON:\n  this.computeAxes(state, state.feature.toGeoJSON());\n\n  this.startDragging(state, e);\n  const about = e.featureTarget.properties;\n  state.selectedCoordPaths = [about.coord_path];\n  state.txMode = TxMode.Rotate;\n};\n\nSRMode.onFeature = function (state, e) {\n  state.selectedCoordPaths = [];\n  this.startDragging(state, e);\n};\n\nSRMode.coordinateIndex = function (coordPaths) {\n  if (coordPaths.length >= 1) {\n    var parts = coordPaths[0].split('.');\n    return parseInt(parts[parts.length - 1]);\n  } else {\n    return 0;\n  }\n};\n\nSRMode.computeRotationCenter = function (state, polygon) {\n  var center0 = center(polygon);\n  return center0;\n};\n\nSRMode.computeAxes = function (state, polygon) {\n  // TODO check min 3 points\n  const center0 = this.computeRotationCenter(state, polygon);\n  let corners;\n  if (polygon.geometry.type === Constants.geojsonTypes.POLYGON)\n    corners = polygon.geometry.coordinates[0].slice(0);\n  else if (polygon.geometry.type === Constants.geojsonTypes.MULTI_POLYGON) {\n    let temp = [];\n    polygon.geometry.coordinates.forEach((c) => {\n      c.forEach((c2) => {\n        c2.forEach((c3) => {\n          temp.push(c3);\n        });\n      });\n    });\n    corners = temp;\n  } else if (polygon.geometry.type === Constants.geojsonTypes.LINE_STRING)\n    corners = polygon.geometry.coordinates;\n  else if (polygon.geometry.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n    let temp = [];\n    polygon.geometry.coordinates.forEach((c) => {\n      c.forEach((c2) => {\n        temp.push(c2);\n      });\n    });\n    corners = temp;\n  }\n  console.log('ðŸš€ ~ file: scaleRotateMode.js ~ line 349 ~ corners', corners);\n\n  const n = corners.length - 1;\n  const iHalf = Math.floor(n / 2);\n\n  var rotateCenters = [];\n  var headings = [];\n\n  for (var i1 = 0; i1 < n; i1++) {\n    var i0 = i1 - 1;\n    if (i0 < 0) i0 += n;\n\n    const c0 = corners[i0];\n    const c1 = corners[i1];\n    const rotPoint = midpoint(point(c0), point(c1));\n\n    var rotCenter = center0;\n    if (SRCenter.Opposite === state.rotatePivot) {\n      var i3 = (i1 + iHalf) % n; // opposite corner\n      var i2 = i3 - 1;\n      if (i2 < 0) i2 += n;\n\n      const c2 = corners[i2];\n      const c3 = corners[i3];\n      rotCenter = midpoint(point(c2), point(c3));\n    }\n\n    rotateCenters[i1] = rotCenter.geometry.coordinates;\n    headings[i1] = bearing(rotCenter, rotPoint);\n  }\n\n  state.rotation = {\n    feature0: polygon, // initial feature state\n    centers: rotateCenters,\n    headings: headings, // rotation start heading for each point\n  };\n\n  // compute current distances from centers for scaling\n\n  var scaleCenters = [];\n  var distances = [];\n  for (var i = 0; i < n; i++) {\n    var c1 = corners[i];\n    var c0 = center0.geometry.coordinates;\n    if (SRCenter.Opposite === state.scaleCenter) {\n      var i2 = (i + iHalf) % n; // opposite corner\n      c0 = corners[i2];\n    }\n    scaleCenters[i] = c0;\n    distances[i] = distance(point(c0), point(c1), { units: 'meters' });\n  }\n\n  state.scaling = {\n    feature0: polygon, // initial feature state\n    centers: scaleCenters,\n    distances: distances,\n  };\n};\n\nSRMode.onDrag = function (state, e) {\n  if (state.canDragMove !== true) return;\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat,\n  };\n  if (state.selectedCoordPaths.length > 0 && state.txMode) {\n    switch (state.txMode) {\n      case TxMode.Rotate:\n        this.dragRotatePoint(state, e, delta);\n        break;\n      case TxMode.Scale:\n        this.dragScalePoint(state, e, delta);\n        break;\n    }\n  } else {\n    this.dragFeature(state, e, delta);\n  }\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSRMode.dragRotatePoint = function (state, e, delta) {\n  if (state.rotation === undefined || state.rotation == null) {\n    console.error('state.rotation required');\n    return;\n  }\n\n  var polygon = state.feature.toGeoJSON();\n  var m1 = point([e.lngLat.lng, e.lngLat.lat]);\n\n  const n = state.rotation.centers.length;\n  var cIdx = (this.coordinateIndex(state.selectedCoordPaths) + 1) % n;\n  // TODO validate cIdx\n  var cCenter = state.rotation.centers[cIdx];\n  var center = point(cCenter);\n\n  var heading1 = bearing(center, m1);\n\n  var heading0 = state.rotation.headings[cIdx];\n  var rotateAngle = heading1 - heading0; // in degrees\n  if (CommonSelectors.isShiftDown(e)) {\n    rotateAngle = 5.0 * Math.round(rotateAngle / 5.0);\n  }\n\n  var rotatedFeature = transformRotate(state.rotation.feature0, rotateAngle, {\n    pivot: center,\n    mutate: false,\n  });\n\n  state.feature.incomingCoords(rotatedFeature.geometry.coordinates);\n  // TODO add option for this:\n  this.fireUpdate();\n};\n\nSRMode.dragScalePoint = function (state, e, delta) {\n  if (state.scaling === undefined || state.scaling == null) {\n    console.error('state.scaling required');\n    return;\n  }\n\n  var polygon = state.feature.toGeoJSON();\n\n  var cIdx = this.coordinateIndex(state.selectedCoordPaths);\n  // TODO validate cIdx\n\n  var cCenter = state.scaling.centers[cIdx];\n  var center = point(cCenter);\n  var m1 = point([e.lngLat.lng, e.lngLat.lat]);\n\n  var dist = distance(center, m1, { units: 'meters' });\n  var scale = dist / state.scaling.distances[cIdx];\n\n  if (CommonSelectors.isShiftDown(e)) {\n    // TODO discrete scaling\n    scale = 0.05 * Math.round(scale / 0.05);\n  }\n\n  var scaledFeature = transformScale(state.scaling.feature0, scale, {\n    origin: cCenter,\n    mutate: false,\n  });\n\n  state.feature.incomingCoords(scaledFeature.geometry.coordinates);\n  // TODO add option for this:\n  this.fireUpdate();\n};\n\nSRMode.dragFeature = function (state, e, delta) {\n  moveFeatures(this.getSelected(), delta);\n  state.dragMoveLocation = e.lngLat;\n  // TODO add option for this:\n  this.fireUpdate();\n};\n\nSRMode.fireUpdate = function () {\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.CHANGE_COORDINATES,\n    features: this.getSelected().map((f) => f.toGeoJSON()),\n  });\n};\n\nSRMode.onMouseOut = function (state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n};\n\nSRMode.onTouchEnd = SRMode.onMouseUp = function (state) {\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n  this.stopDragging(state);\n};\n\nSRMode.clickActiveFeature = function (state) {\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  state.feature.changed();\n};\n\nSRMode.onClick = function (state, e) {\n  if (CommonSelectors.noTarget(e)) return this.clickNoTarget(state, e);\n  if (CommonSelectors.isActiveFeature(e))\n    return this.clickActiveFeature(state, e);\n  if (CommonSelectors.isInactiveFeature(e)) return this.clickInactive(state, e);\n  this.stopDragging(state);\n};\n\nSRMode.clickNoTarget = function (state, e) {\n  if (state.canSelectFeatures) this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nSRMode.clickInactive = function (state, e) {\n  if (state.canSelectFeatures)\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {\n      featureIds: [e.featureTarget.properties.id],\n    });\n};\n\nSRMode.onTrash = function () {\n  this.deleteFeature(this.getSelectedIds());\n  // this.fireActionable();\n};\n","import React, { useRef, useEffect } from 'react';\nimport mapboxGl from 'mapbox-gl';\nimport MapboxDraw from '@mapbox/mapbox-gl-draw';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport { SRMode, SRCenter } from 'mapbox-gl-draw-scale-rotate-mode';\nimport './App.css';\nimport rotate from './rotate.png';\nimport scale from './scale.png';\n\nlet map;\nlet draw;\nlet drawBar;\n\nclass extendDrawBar {\n  constructor(opt) {\n    let ctrl = this;\n    ctrl.draw = opt.draw;\n    ctrl.buttons = opt.buttons || [];\n    ctrl.onAddOrig = opt.draw.onAdd;\n    ctrl.onRemoveOrig = opt.draw.onRemove;\n  }\n  onAdd(map) {\n    let ctrl = this;\n    ctrl.map = map;\n    ctrl.elContainer = ctrl.onAddOrig(map);\n    ctrl.buttons.forEach((b) => {\n      ctrl.addButton(b);\n    });\n    return ctrl.elContainer;\n  }\n  onRemove(map) {\n    let ctrl = this;\n    ctrl.buttons.forEach((b) => {\n      ctrl.removeButton(b);\n    });\n    ctrl.onRemoveOrig(map);\n  }\n  addButton(opt) {\n    let ctrl = this;\n    var elButton = document.createElement('button');\n    elButton.className = 'mapbox-gl-draw_ctrl-draw-btn';\n    if (opt.classes instanceof Array) {\n      opt.classes.forEach((c) => {\n        elButton.classList.add(c);\n      });\n    }\n    elButton.addEventListener(opt.on, opt.action);\n    ctrl.elContainer.appendChild(elButton);\n    opt.elButton = elButton;\n  }\n  removeButton(opt) {\n    opt.elButton.removeEventListener(opt.on, opt.action);\n    opt.elButton.remove();\n  }\n}\n\nvar drawStyle = [\n  {\n    id: 'gl-draw-polygon-fill-inactive',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'user_type', 'overlay'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'fill-color': '#3bb2d0',\n      'fill-outline-color': '#3bb2d0',\n      'fill-opacity': 0.2,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-fill-active',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'true'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'user_type', 'overlay'],\n    ],\n    paint: {\n      'fill-color': '#fbb03b',\n      'fill-outline-color': '#fbb03b',\n      'fill-opacity': 0.2,\n    },\n  },\n\n  {\n    id: 'gl-draw-overlay-polygon-fill-inactive',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['==', 'user_type', 'overlay'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'fill-color': '#3bb2d0',\n      'fill-outline-color': '#3bb2d0',\n      'fill-opacity': 0.01,\n    },\n  },\n  {\n    id: 'gl-draw-overlay-polygon-fill-active',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'true'],\n      ['==', '$type', 'Polygon'],\n      ['==', 'user_type', 'overlay'],\n    ],\n    paint: {\n      'fill-color': '#fbb03b',\n      'fill-outline-color': '#fbb03b',\n      'fill-opacity': 0.01,\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-stroke-inactive',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'user_type', 'overlay'],\n      ['!=', 'mode', 'static'],\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#3bb2d0',\n      'line-width': 2,\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-stroke-active',\n    type: 'line',\n    filter: ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2,\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-midpoint',\n    type: 'circle',\n    filter: ['all', ['==', '$type', 'Point'], ['==', 'meta', 'midpoint']],\n    paint: {\n      'circle-radius': 3,\n      'circle-color': '#fbb03b',\n    },\n  },\n\n  {\n    id: 'gl-draw-line-inactive',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'LineString'],\n      ['!=', 'mode', 'static'],\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#3bb2d0',\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-line-active',\n    type: 'line',\n    filter: ['all', ['==', '$type', 'LineString'], ['==', 'active', 'true']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-and-line-vertex-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 2,\n      'circle-color': '#fbb03b',\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-and-line-vertex-scale-icon',\n    type: 'symbol',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n      ['has', 'heading'],\n    ],\n    layout: {\n      'icon-image': 'scale',\n      'icon-allow-overlap': true,\n      'icon-ignore-placement': true,\n      'icon-rotation-alignment': 'map',\n      'icon-rotate': ['get', 'heading'],\n    },\n    paint: {\n      'icon-opacity': 1.0,\n      'icon-opacity-transition': {\n        delay: 0,\n        duration: 0,\n      },\n    },\n  },\n\n  {\n    id: 'gl-draw-point-point-stroke-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 5,\n      'circle-opacity': 1,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-point-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 3,\n      'circle-color': '#3bb2d0',\n    },\n  },\n  {\n    id: 'gl-draw-point-stroke-active',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', '$type', 'Point'],\n      ['==', 'active', 'true'],\n      ['!=', 'meta', 'midpoint'],\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-point-active',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', '$type', 'Point'],\n      ['!=', 'meta', 'midpoint'],\n      ['==', 'active', 'true'],\n    ],\n    paint: {\n      'circle-radius': 2,\n      'circle-color': '#fbb03b',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-fill-static',\n    type: 'fill',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    paint: {\n      'fill-color': '#404040',\n      'fill-outline-color': '#404040',\n      'fill-opacity': 0.1,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-stroke-static',\n    type: 'line',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#404040',\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-line-static',\n    type: 'line',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'LineString']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#404040',\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-point-static',\n    type: 'circle',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Point']],\n    paint: {\n      'circle-radius': 5,\n      'circle-color': '#404040',\n    },\n  },\n\n  // {\n  //     'id': 'gl-draw-polygon-rotate-point',\n  //     'type': 'circle',\n  //     'filter': ['all',\n  //         ['==', '$type', 'Point'],\n  //         ['==', 'meta', 'rotate_point']],\n  //     'paint': {\n  //         'circle-radius': 5,\n  //         'circle-color': '#fbb03b'\n  //     }\n  // },\n\n  {\n    id: 'gl-draw-line-rotate-point',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'LineString'],\n      ['!=', 'mode', 'static'],\n      // ['==', 'active', 'true']\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-rotate-point-stroke',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-rotate-point',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 2,\n      'circle-color': '#fbb03b',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-rotate-point-icon',\n    type: 'symbol',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    layout: {\n      'icon-image': 'rotate',\n      'icon-allow-overlap': true,\n      'icon-ignore-placement': true,\n      'icon-rotation-alignment': 'map',\n      'icon-rotate': ['get', 'heading'],\n    },\n    paint: {\n      'icon-opacity': 1.0,\n      'icon-opacity-transition': {\n        delay: 0,\n        duration: 0,\n      },\n    },\n  },\n];\n\nfunction App() {\n  if (mapboxGl.getRTLTextPluginStatus() === 'unavailable')\n    mapboxGl.setRTLTextPlugin(\n      'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js',\n      (err) => {\n        err && console.error(err);\n      },\n      true\n    );\n  let mapRef = useRef(null);\n\n  useEffect(() => {\n    map = new mapboxGl.Map({\n      container: mapRef.current || '',\n      style: `https://map.ir/vector/styles/main/mapir-xyz-light-style.json`,\n      center: [51.3857, 35.6102],\n      zoom: 10,\n      pitch: 0,\n      interactive: true,\n      hash: true,\n      attributionControl: true,\n      customAttribution: 'Â© Map Â© Openstreetmap',\n      transformRequest: (url) => {\n        return {\n          url: url,\n          headers: {\n            'x-api-key':\n              'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A', //dev api key\n            'Mapir-SDK': 'reactjs',\n          },\n        };\n      },\n    });\n    draw = new MapboxDraw({\n      modes: {\n        ...MapboxDraw.modes,\n        scaleRotateMode: SRMode,\n      },\n      styles: drawStyle,\n      userProperties: true,\n    });\n    drawBar = new extendDrawBar({\n      draw: draw,\n      buttons: [\n        {\n          on: 'click',\n          action: scaleRotate,\n          classes: ['rotate-icon'],\n        },\n      ],\n    });\n    map.once('load', () => {\n      map.resize();\n      map.loadImage(rotate, function (error, image) {\n        if (error) throw error;\n        map.addImage('rotate', image);\n      });\n      map.loadImage(scale, function (error, image) {\n        if (error) throw error;\n        map.addImage('scale', image);\n      });\n      map.addControl(drawBar, 'top-right');\n      draw.set({\n        type: 'FeatureCollection',\n        features: [\n          {\n            type: 'Feature',\n            properties: {},\n            id: 'example-id',\n            geometry: {\n              type: 'Polygon',\n              coordinates: [\n                [\n                  [51.41742415918904, 35.73019558439101],\n                  [51.31319413385742, 35.702773908694724],\n                  [51.378997493472525, 35.665562843119986],\n                  [51.45008537540798, 35.67776544979942],\n                  [51.46619566741822, 35.70822028156377],\n                  [51.41742415918904, 35.73019558439101],\n                ],\n              ],\n            },\n          },\n          {\n            id: 'example2_id',\n            type: 'Feature',\n            properties: {},\n            geometry: {\n              type: 'LineString',\n              coordinates: [\n                [51.46717071533203, 35.752642192392955],\n                [51.41704559326172, 35.7715862712587],\n                [51.37207031249999, 35.73954585450408],\n                [51.31988525390625, 35.753756674845675],\n                [51.29344940185547, 35.713904233681035],\n                [51.37035369873047, 35.67012719291238],\n                [51.32434844970703, 35.633581468816594],\n              ],\n            },\n          },\n        ],\n      });\n    });\n  }, []);\n\n  const scaleRotate = () => {\n    try {\n      draw.changeMode('scaleRotateMode', {\n        featureId: draw.getSelected().features[0].id, // required\n\n        canScale: true,\n        canRotate: true, // only rotation enabled\n        canTrash: false, // disable feature delete\n\n        rotatePivot: SRCenter.Center, // rotate around center\n        scaleCenter: SRCenter.Opposite, // scale around opposite vertex\n\n        singleRotationPoint: true, // only one rotation point\n        rotationPointRadius: 1.2, // offset rotation point\n\n        canSelectFeatures: true,\n      });\n    } catch (err) {\n      alert(err.message);\n      console.error(err);\n    }\n  };\n\n  return (\n    <div className=\"map-wrapper\">\n      <div id=\"map\" ref={mapRef} />\n    </div>\n  );\n}\n\nexport default App;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1pJREFUeNrElk9IVFEUxs+89yYoDAumxUgkoYIDZfaXCqfA3GSBi8poEYWzjVrUJiqiJFoJZUEQEYYRBAaFpIsgq5F0UThYZJSLdKEtgpRSQd/M6zvXe8c743vznhs78GOGmXfPd+49551zQ47j0BKtGqyV31Pg95JWs6APO8AdMOC42wToBAlg+fkLaTuMgFMgDpLgLbgKDucEOPmdnLm/4rtRXEEULtL/HgLPwBWvDSpBFhsE0UVPwHl65CWlR7uF2CKDoBndR0ZpPRmRrerXbnAWDHsJNoPLmfF3cN5NVqyJQog+PfyU7K8PhWgQY0Fr+yUKrRJxz4Bd4LOb4Buwfy55hjK/BsgsP07OxDfxPfsgnBgl2EkENRNePX+84pkUcaD6jq2qc2RuqFeiVfpOXQVzIoKQiR1LB+6FNz1O9mBrjjDvVK7pA3uzp1DoiPhYV9S26dE+BkdBreQC6OWgwrtvChFl9uBtlfM9MmX+gsa6bWQjj3LhSvBIVmGPpEVWNQvPcGBZUeSdRaUdCCTIRZNG0aTHskcV93i0RRaIEOUaYOP0aLusFkftV3miWNZUkNZZvIyr8STosCqbyJkapxAKiNMi85jSO02z429jIBKgMz1xWZtQ/+sPsmjS5eEfoD2gmOI8eA7adLH81rYsZtAy238V3CSnhCM/6wL6WA86wYRcm09S+s6Zh+Vg2qVg6gIUSFeACv+iZqV6Dxu4k6RHu8j+eINMvEdWLMG/Xwf9wGtcbAQHuZfOvj7tOlXC8bs8RWKyafQYegfJjCXnOwy6i9Yh7hc4zmLVxgKPMPkplMzyxoW5239ROTkB3nvklLtHH3cTMR0qm1Rn8RXkLjvEA1T1QXFMGFfaTl/JwLjzX5O0gxIRLE8Ue8r9VqCZyqEt7yEd1mbcDGb/EOeTF7OoWdZIFgcSLqrBMzX5TrhJa+OocG/O6zRcKQ9EBJ9axbTIv0KEFu4tRNM/5ycCTiNnYJcdE+vZeJ7KY+aFKbfWlhUVkaNqdYeFjNPBk4KvGSpYmaLs1PfqpUdkrmJCGFcHruAMXxH1Y4Njvioa0TiZpYfyr4y67QQfCgmy8ep7clpHA3adXnALjGjDOqnE/AT1C3KDdLBFTW5pk/LVYKcvdMde9k+AAQDas8HyPpQD4AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAActJREFUeNpi/P//PwMJwAWIbYH4MBDvIUUjA8giIvGy/6igmQS9RFnEA7fk1+f/v6/NQbZsGbUsAllyDGbJz73x/3+ss/r/61A2mE+KZUwEQnY6EFv+/3ib4de+BAYQDQL/3pxn+HU4h4Hh9xcQNxKIiwlFESGLQBHP8PtEJcP/b89R4xZo6e+zrSjq8AEWAvKg1CXPJOcJNPgOAyO3JMPfOysZmCTtIK4UMUBWR1Gqc0GOeVBCAMURWoIAARNK4wiUV1yBuAlZkJGVB8YsAWJTID5DrXzkAkt5f1+fI8knpOQjbBn2GimWgDAjiUWQIBAbQCP/DykaSbWIbMDEQCdAjkUGtLYoGYiPAfF5KK1Di2oiGZbc/n24BWM+A2IRYlMdMT4ygZVlf4BlG6hw/ff8EIgrSUwZR2zQgSw5DcTxYN9DC9Z/H27D5NdBg5Fii+pBBKggBWE4+POV4c/1ubBqw5KYaoJQPvoAxPw/t7jD6h5UVwJLcVaLdhBzIxAHUOIjcPHPZjuFgQFRkEJcyK/KwKKZRLVqQgZWlYNS24/NbuBqAlSlI1Xlx6hVqKJY9ut4BcntBVJKb7hl5LSAyCm9i5EakL2kaAQIMAAP/aLE8VYEBwAAAABJRU5ErkJggg==\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}