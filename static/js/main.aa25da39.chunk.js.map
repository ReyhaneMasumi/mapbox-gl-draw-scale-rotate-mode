{"version":3,"sources":["../../src/img/rotate.png","../../src/img/scale.png","../../src/index.js","App.js","reportWebVitals.js","index.js"],"names":["rotate","require","scale","SRMode","SRCenter","SRStyle","id","type","filter","paint","layout","delay","duration","parseSRCenter","value","defaultSRCenter","undefined","Error","onSetup","opts","featureId","this","getSelected","feature","getFeature","Constants","POINT","MULTI_POINT","TypeError","state","canTrash","canScale","canRotate","singleRotationPoint","rotationPointRadius","rotatePivot","scaleCenter","canSelectFeatures","dragMoveLocation","startPos","dragMoving","canDragMove","selectedCoordPaths","coordPath","console","warn","setSelectedCoordinates","pathsToCoordinates","setSelected","doubleClickZoom","disable","setActionableState","combineFeatures","uncombineFeatures","trash","_this","map","loadImage","default","error","image","addImage","toDisplayFeatures","geojson","push","properties","active","ACTIVE","suppPoints","createSupplementaryPoints","midpoints","selectedPaths","computeBisectrix","forEach","createRotationPoints","INACTIVE","onStop","enable","clearSelectedCoordinates","paths","coord_path","feature_id","points","i1","length","i0","i2","a","lineString","geometry","coordinates","bearing","heading","_createRotationPoint","rotationWidgets","v1","v2","rotCenter","radiusScale","cR0","midpoint","distance1","distance","cR1","destination","FEATURE","meta","MIDPOINT","icon","parent","lng","lat","corners","slice","computeRotationCenter","startDragging","e","dragPan","lngLat","stopDragging","isRotatePoint","CommonSelectors","isVertex","VERTEX","onTouchStart","onMouseDown","onVertex","onRotatePoint","onFeature","TxMode","computeAxes","toGeoJSON","about","featureTarget","txMode","coordinateIndex","coordPaths","parts","split","parseInt","polygon","center","center0","POLYGON","MULTI_POLYGON","temp","c","c2","c3","LINE_STRING","MULTI_LINE_STRING","n","iHalf","Math","floor","rotateCenters","headings","c0","c1","rotPoint","point","i3","rotation","feature0","centers","scaleCenters","distances","i","units","scaling","onDrag","originalEvent","stopPropagation","delta","dragRotatePoint","dragScalePoint","dragFeature","m1","cIdx","cCenter","rotateAngle","round","rotatedFeature","transformRotate","pivot","mutate","incomingCoords","fireUpdate","scaledFeature","transformScale","origin","moveFeatures","fire","UPDATE","action","CHANGE_COORDINATES","features","f","onMouseOut","onTouchEnd","onMouseUp","clickActiveFeature","changed","onClick","clickNoTarget","clickInactive","changeMode","SIMPLE_SELECT","featureIds","onTrash","deleteFeature","getSelectedIds","draw","drawBar","extendDrawBar","opt","ctrl","buttons","onAddOrig","onAdd","onRemoveOrig","onRemove","elContainer","b","addButton","removeButton","elButton","document","createElement","className","classes","Array","classList","add","addEventListener","on","appendChild","removeEventListener","remove","App","mapboxGl","getRTLTextPluginStatus","setRTLTextPlugin","err","mapRef","useRef","useEffect","Map","container","current","style","zoom","pitch","interactive","hash","attributionControl","customAttribution","transformRequest","url","headers","MapboxDraw","modes","scaleRotateMode","styles","userProperties","scaleRotate","once","resize","addControl","set","alert","message","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"kHAAA,OAAe,4xC,gCCAf,OAAe,wwB,6QCeXA,EAASC,EAAQ,IACjBC,EAAQD,EAAQ,IAEPE,EAAS,GAETC,EACH,EADGA,EAED,EAGCC,EAAU,CACrB,CACEC,GAAI,gCACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,SACjB,CAAC,KAAM,QAAS,WAChB,CAAC,KAAM,YAAa,WACpB,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,aAAc,UACd,qBAAsB,UACtB,eAAgB,KAGpB,CACEH,GAAI,8BACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,QACjB,CAAC,KAAM,QAAS,WAChB,CAAC,KAAM,YAAa,YAEtBC,MAAO,CACL,aAAc,UACd,qBAAsB,UACtB,eAAgB,KAIpB,CACEH,GAAI,wCACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,SACjB,CAAC,KAAM,QAAS,WAChB,CAAC,KAAM,YAAa,WACpB,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,aAAc,UACd,qBAAsB,UACtB,eAAgB,MAGpB,CACEH,GAAI,sCACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,QACjB,CAAC,KAAM,QAAS,WAChB,CAAC,KAAM,YAAa,YAEtBC,MAAO,CACL,aAAc,UACd,qBAAsB,UACtB,eAAgB,MAIpB,CACEH,GAAI,kCACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,SACjB,CAAC,KAAM,QAAS,WAChB,CAAC,KAAM,YAAa,WACpB,CAAC,KAAM,OAAQ,WAEjBE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,aAAc,IAIlB,CACEH,GAAI,gCACJC,KAAM,OACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,SAAU,QAAS,CAAC,KAAM,QAAS,YAC1DE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,iBAAkB,CAAC,GAAK,GACxB,aAAc,IAIlB,CACEH,GAAI,2BACJC,KAAM,SACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,QAAS,SAAU,CAAC,KAAM,OAAQ,aACzDC,MAAO,CACL,gBAAiB,EACjB,eAAgB,YAIpB,CACEH,GAAI,wBACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,SACjB,CAAC,KAAM,QAAS,cAChB,CAAC,KAAM,OAAQ,WAEjBE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,aAAc,IAGlB,CACEH,GAAI,sBACJC,KAAM,OACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,QAAS,cAAe,CAAC,KAAM,SAAU,SAChEE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,iBAAkB,CAAC,GAAK,GACxB,aAAc,IAGlB,CACEH,GAAI,kDACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,SAGpB,CACEH,GAAI,2CACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,YAIpB,CACEH,GAAI,6CACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,UACf,CAAC,MAAO,YAEVE,OAAQ,CACN,aAAc,QACd,sBAAsB,EACtB,yBAAyB,EACzB,0BAA2B,MAC3B,cAAe,CAAC,MAAO,YAEzBD,MAAO,CACL,eAAgB,EAChB,0BAA2B,CACzBE,MAAO,EACPC,SAAU,KAKhB,CACEN,GAAI,sCACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,SACjB,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WACf,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,gBAAiB,EACjB,iBAAkB,EAClB,eAAgB,SAGpB,CACEH,GAAI,yBACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,SAAU,SACjB,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WACf,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,YAGpB,CACEH,GAAI,8BACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,SAAU,QACjB,CAAC,KAAM,OAAQ,aAEjBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,SAGpB,CACEH,GAAI,uBACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,YACf,CAAC,KAAM,SAAU,SAEnBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,YAGpB,CACEH,GAAI,8BACJC,KAAM,OACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,OAAQ,UAAW,CAAC,KAAM,QAAS,YAC1DC,MAAO,CACL,aAAc,UACd,qBAAsB,UACtB,eAAgB,KAGpB,CACEH,GAAI,gCACJC,KAAM,OACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,OAAQ,UAAW,CAAC,KAAM,QAAS,YAC1DE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,aAAc,IAGlB,CACEH,GAAI,sBACJC,KAAM,OACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,OAAQ,UAAW,CAAC,KAAM,QAAS,eAC1DE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,aAAc,IAGlB,CACEH,GAAI,uBACJC,KAAM,SACNC,OAAQ,CAAC,MAAO,CAAC,KAAM,OAAQ,UAAW,CAAC,KAAM,QAAS,UAC1DC,MAAO,CACL,gBAAiB,EACjB,eAAgB,YAgBpB,CACEH,GAAI,4BACJC,KAAM,OACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,YACf,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,cAChB,CAAC,KAAM,OAAQ,WAGjBE,OAAQ,CACN,WAAY,QACZ,YAAa,SAEfD,MAAO,CACL,aAAc,UACd,iBAAkB,CAAC,GAAK,GACxB,aAAc,IAGlB,CACEH,GAAI,sCACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,YACf,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,SAGpB,CACEH,GAAI,+BACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,YACf,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WAEjBC,MAAO,CACL,gBAAiB,EACjB,eAAgB,YAGpB,CACEH,GAAI,oCACJC,KAAM,SACNC,OAAQ,CACN,MACA,CAAC,KAAM,OAAQ,YACf,CAAC,KAAM,OAAQ,UACf,CAAC,KAAM,QAAS,SAChB,CAAC,KAAM,OAAQ,WAEjBE,OAAQ,CACN,aAAc,SACd,sBAAsB,EACtB,yBAAyB,EACzB,0BAA2B,MAC3B,cAAe,CAAC,MAAO,YAEzBD,MAAO,CACL,eAAgB,EAChB,0BAA2B,CACzBE,MAAO,EACPC,SAAU,MAMlB,SAASC,EAAcC,GAA0C,IAAnCC,EAAmC,uDAAjBX,EAC9C,QAAaY,GAATF,GAA+B,MAATA,EAAe,OAAOC,EAEhD,GAAID,IAAUV,GAAmBU,IAAUV,EAAmB,OAAOU,EAErE,GAAa,UAATA,EAAmB,OAAOV,EAE9B,GAAa,YAATU,EAAqB,OAAOV,EAEhC,MAAMa,MAAM,qBAAuBH,GAgBrCX,EAAOe,QAAU,SAAUC,GACzB,IAAMC,EAAYC,KAAKC,cAAc,GAAGhB,GAElCiB,EAAUF,KAAKG,WAAWJ,GAEhC,IAAKG,EACH,MAAM,IAAIN,MAAM,sDAGlB,GACEM,EAAQhB,OAASkB,IAAuBC,OACxCH,EAAQhB,OAASkB,IAAuBE,YAExC,MAAM,IAAIC,UAAU,gCAUtB,IAAMC,EAAQ,CACZT,YACAG,UAEAO,cAA2Bd,GAAjBG,EAAKW,UAAwBX,EAAKW,SAE5CC,cAA2Bf,GAAjBG,EAAKY,UAAwBZ,EAAKY,SAC5CC,eAA6BhB,GAAlBG,EAAKa,WAAyBb,EAAKa,UAE9CC,yBAC8BjB,GAA5BG,EAAKc,qBAAmCd,EAAKc,oBAC/CC,yBAC8BlB,GAA5BG,EAAKe,oBAAmCf,EAAKe,oBAAsB,EAErEC,YAAatB,EAAcM,EAAKgB,YAAa/B,GAC7CgC,YAAavB,EAAcM,EAAKiB,YAAahC,GAE7CiC,uBAC4BrB,GAA1BG,EAAKkB,mBAAiClB,EAAKkB,kBAG7CC,iBAAkBnB,EAAKoB,UAAY,KACnCC,YAAY,EACZC,aAAa,EACbC,mBAAoBvB,EAAKwB,UAAY,CAACxB,EAAKwB,WAAa,IAGpDd,EAAMG,WAAaH,EAAME,UAC7Ba,QAAQC,KAAK,wCAGfxB,KAAKyB,uBACHzB,KAAK0B,mBAAmB3B,EAAWS,EAAMa,qBAE3CrB,KAAK2B,YAAY5B,GACjB6B,IAAgBC,QAAQ7B,MAExBA,KAAK8B,mBAAmB,CACtBC,iBAAiB,EACjBC,mBAAmB,EACnBC,MAAOzB,EAAMC,WAGf,IAAIyB,EAAQlC,KAUZ,OATAA,KAAKmC,IAAIC,UAAUzD,EAAO0D,SAAS,SAAUC,EAAOC,GAClD,GAAID,EAAO,MAAMA,EACjBJ,EAAMC,IAAIK,SAAS,SAAUD,MAE/BvC,KAAKmC,IAAIC,UAAUvD,EAAMwD,SAAS,SAAUC,EAAOC,GACjD,GAAID,EAAO,MAAMA,EACjBJ,EAAMC,IAAIK,SAAS,QAASD,MAGvB/B,GAGT1B,EAAO2D,kBAAoB,SAAUjC,EAAOkC,EAASC,GACnD,GAAInC,EAAMT,YAAc2C,EAAQE,WAAW3D,GAAI,CAC7CyD,EAAQE,WAAWC,OAASzC,IAAuB0C,OACnDH,EAAKD,GAEL,IAAIK,EAAaC,YAA0BN,EAAS,CAClDP,IAAKnC,KAAKmC,IACVc,WAAW,EACXC,cAAe1C,EAAMa,qBAQvB,GALIb,EAAME,WACRV,KAAKmD,iBAAiBJ,GACtBA,EAAWK,QAAQT,IAGjBnC,EAAMG,UACQX,KAAKqD,qBAAqB7C,EAAOkC,EAASK,GAChDK,QAAQT,QAGpBD,EAAQE,WAAWC,OAASzC,IAAuBkD,SACnDX,EAAKD,GAIP1C,KAAK8B,mBAAmB,CACtBC,iBAAiB,EACjBC,mBAAmB,EACnBC,MAAOzB,EAAMC,YAMjB3B,EAAOyE,OAAS,WACd3B,IAAgB4B,OAAOxD,MACvBA,KAAKyD,4BAIP3E,EAAO4C,mBAAqB,SAAU3B,EAAW2D,GAC/C,OAAOA,EAAMvB,KAAI,SAACwB,GAChB,MAAO,CAAEC,WAAY7D,EAAW4D,kBAIpC7E,EAAOqE,iBAAmB,SAAUU,GAClC,IAAK,IAAIC,EAAK,EAAGA,EAAKD,EAAOE,OAAQD,IAAM,CACzC,IAAIE,GAAMF,EAAK,EAAID,EAAOE,QAAUF,EAAOE,OACvCE,GAAMH,EAAK,GAAKD,EAAOE,OAmBvBG,GAjBKC,YAAW,CAClBN,EAAOG,GAAII,SAASC,YACpBR,EAAOC,GAAIM,SAASC,cAEbF,YAAW,CAClBN,EAAOC,GAAIM,SAASC,YACpBR,EAAOI,GAAIG,SAASC,eAEbC,YACPT,EAAOG,GAAII,SAASC,YACpBR,EAAOC,GAAIM,SAASC,aAEbC,YACPT,EAAOI,GAAIG,SAASC,YACpBR,EAAOC,GAAIM,SAASC,cAGF,GAEhBH,EAAI,IAAKA,GAAK,KACdA,EAAI,MAAKA,GAAK,KAElBL,EAAOC,GAAIlB,WAAW2B,QAAUL,IAIpCpF,EAAO0F,qBAAuB,SAC5BC,EACA1E,EACA2E,EACAC,EACAC,EACAC,GAEA,IAAIC,EAAMC,YAASL,EAAIC,GAAIP,SAASC,YAChCE,EAAUD,YAAQM,EAAWE,GAE7BE,EAAYH,EADAI,YAASL,EAAWE,GAEhCI,EAAMC,YAAYP,EAAWI,EAAWT,EAAS,IAAIH,SAASC,YAElEI,EAAgB9B,KAAK,CACnBzD,KAAMkB,IAAuBgF,QAC7BxC,WAAY,CACVyC,KAAMjF,IAAekF,SACrBC,KAAM,SACNC,OAAQzF,EACR0F,IAAKP,EAAI,GACTQ,IAAKR,EAAI,GACTvB,WAAYe,EAAG9B,WAAWe,WAC1BY,QAASA,GAEXH,SAAU,CACRlF,KAAMkB,IAAuBC,MAC7BgE,YAAaa,MAKnBpG,EAAOuE,qBAAuB,SAAU7C,EAAOkC,EAASK,GAAY,aACpCL,EAAQ0B,SAA9BlF,EAD0D,EAC1DA,KACFa,GAF4D,EACpDsE,YACI3B,EAAQE,YAAcF,EAAQE,WAAW3D,IAEvDwF,EAAkB,GACtB,GACEvF,IAASkB,IAAuBC,OAChCnB,IAASkB,IAAuBE,YAFlC,CAOA,IAAIqF,EAAU5C,EAAW6C,MAAM,GAC/BD,EAAQA,EAAQ5B,QAAU4B,EAAQ,GAElC,IAAIjB,EAAK,KAELE,EAAY5E,KAAK6F,sBAAsBrF,EAAOkC,GA2BlD,OAzBIlC,EAAMI,oBACRZ,KAAKwE,qBACHC,EACA1E,EACA4F,EAAQ,GACRA,EAAQ,GACRf,EACApE,EAAMK,qBAGR8E,EAAQvC,SAAQ,SAACuB,GACL,MAAND,GACF,EAAKF,qBACHC,EACA1E,EACA2E,EACAC,EACAC,EACApE,EAAMK,qBAIV6D,EAAKC,KAGFF,IAGT3F,EAAOgH,cAAgB,SAAUtF,EAAOuF,GACtC/F,KAAKmC,IAAI6D,QAAQnE,UACjBrB,EAAMY,aAAc,EACpBZ,EAAMS,iBAAmB8E,EAAEE,QAG7BnH,EAAOoH,aAAe,SAAU1F,GAC9BR,KAAKmC,IAAI6D,QAAQxC,SACjBhD,EAAMW,YAAa,EACnBX,EAAMY,aAAc,EACpBZ,EAAMS,iBAAmB,MAG3B,IAAMkF,EAAgBC,IAA6BhG,IAAekF,UAC5De,EAAWD,IAA6BhG,IAAekG,QAE7DxH,EAAOyH,aAAezH,EAAO0H,YAAc,SAAUhG,EAAOuF,GAC1D,OAAIM,EAASN,GAAW/F,KAAKyG,SAASjG,EAAOuF,GACzCI,EAAcJ,GAAW/F,KAAK0G,cAAclG,EAAOuF,GACnDK,IAAgCL,GAAW/F,KAAK2G,UAAUnG,EAAOuF,QAArE,GAIF,IAAMa,EACG,EADHA,EAEI,EAGV9H,EAAO2H,SAAW,SAAUjG,EAAOuF,GAEjC/F,KAAK6G,YAAYrG,EAAOA,EAAMN,QAAQ4G,aAEtC9G,KAAK8F,cAActF,EAAOuF,GAC1B,IAAMgB,EAAQhB,EAAEiB,cAAcpE,WAC9BpC,EAAMa,mBAAqB,CAAC0F,EAAMpD,YAClCnD,EAAMyG,OAASL,GAGjB9H,EAAO4H,cAAgB,SAAUlG,EAAOuF,GAEtC/F,KAAK6G,YAAYrG,EAAOA,EAAMN,QAAQ4G,aAEtC9G,KAAK8F,cAActF,EAAOuF,GAC1B,IAAMgB,EAAQhB,EAAEiB,cAAcpE,WAC9BpC,EAAMa,mBAAqB,CAAC0F,EAAMpD,YAClCnD,EAAMyG,OAASL,GAGjB9H,EAAO6H,UAAY,SAAUnG,EAAOuF,GAClCvF,EAAMa,mBAAqB,GAC3BrB,KAAK8F,cAActF,EAAOuF,IAG5BjH,EAAOoI,gBAAkB,SAAUC,GACjC,GAAIA,EAAWpD,QAAU,EAAG,CAC1B,IAAIqD,EAAQD,EAAW,GAAGE,MAAM,KAChC,OAAOC,SAASF,EAAMA,EAAMrD,OAAS,IAErC,OAAO,GAIXjF,EAAO+G,sBAAwB,SAAUrF,EAAO+G,GAE9C,OADcC,YAAOD,IAIvBzI,EAAO+H,YAAc,SAAUrG,EAAO+G,GAEpC,IACI5B,EADE8B,EAAUzH,KAAK6F,sBAAsBrF,EAAO+G,GAElD,GAAIA,EAAQnD,SAASlF,OAASkB,IAAuBsH,QACnD/B,EAAU4B,EAAQnD,SAASC,YAAY,GAAGuB,MAAM,QAC7C,GAAI2B,EAAQnD,SAASlF,OAASkB,IAAuBuH,cAAe,CACvE,IAAIC,EAAO,GACXL,EAAQnD,SAASC,YAAYjB,SAAQ,SAACyE,GACpCA,EAAEzE,SAAQ,SAAC0E,GACTA,EAAG1E,SAAQ,SAAC2E,GACVH,EAAKjF,KAAKoF,YAIhBpC,EAAUiC,OACL,GAAIL,EAAQnD,SAASlF,OAASkB,IAAuB4H,YAC1DrC,EAAU4B,EAAQnD,SAASC,iBACxB,GAAIkD,EAAQnD,SAASlF,OAASkB,IAAuB6H,kBAAmB,CAC3E,IAAIL,EAAO,GACXL,EAAQnD,SAASC,YAAYjB,SAAQ,SAACyE,GACpCA,EAAEzE,SAAQ,SAAC0E,GACTF,EAAKjF,KAAKmF,SAGdnC,EAAUiC,EASZ,IANA,IAAMM,EAAIvC,EAAQ5B,OAAS,EACrBoE,EAAQC,KAAKC,MAAMH,EAAI,GAEzBI,EAAgB,GAChBC,EAAW,GAENzE,EAAK,EAAGA,EAAKoE,EAAGpE,IAAM,CAC7B,IAAIE,EAAKF,EAAK,EACVE,EAAK,IAAGA,GAAMkE,GAElB,IAAMM,EAAK7C,EAAQ3B,GACbyE,EAAK9C,EAAQ7B,GACb4E,EAAW3D,YAAS4D,YAAMH,GAAKG,YAAMF,IAEvC7D,EAAY6C,EAChB,GAAI1I,IAAsByB,EAAMM,YAAa,CAC3C,IAAI8H,GAAM9E,EAAKqE,GAASD,GACpBjE,EAAK2E,EAAK,GACL,IAAG3E,GAAMiE,GAElB,IAAMJ,EAAKnC,EAAQ1B,GACb8D,EAAKpC,EAAQiD,GACnBhE,EAAYG,YAAS4D,YAAMb,GAAKa,YAAMZ,IAGxCO,EAAcxE,GAAMc,EAAUR,SAASC,YACvCkE,EAASzE,GAAMQ,YAAQM,EAAW8D,GAGpClI,EAAMqI,SAAW,CACfC,SAAUvB,EACVwB,QAAST,EACTC,SAAUA,GAOZ,IAFA,IAAIS,EAAe,GACfC,EAAY,GACPC,EAAI,EAAGA,EAAIhB,EAAGgB,IAAK,CAC1B,IAGMjF,EAHFwE,EAAK9C,EAAQuD,GACbV,EAAKf,EAAQrD,SAASC,YAC1B,GAAItF,IAAsByB,EAAMO,YAE9ByH,EAAK7C,EADD1B,GAAMiF,EAAIf,GAASD,GAGzBc,EAAaE,GAAKV,EAClBS,EAAUC,GAAKjE,YAAS0D,YAAMH,GAAKG,YAAMF,GAAK,CAAEU,MAAO,WAGzD3I,EAAM4I,QAAU,CACdN,SAAUvB,EACVwB,QAASC,EACTC,UAAWA,IAIfnK,EAAOuK,OAAS,SAAU7I,EAAOuF,GAC/B,IAA0B,IAAtBvF,EAAMY,YAAV,CACAZ,EAAMW,YAAa,EACnB4E,EAAEuD,cAAcC,kBAEhB,IAAMC,EAAQ,CACZ/D,IAAKM,EAAEE,OAAOR,IAAMjF,EAAMS,iBAAiBwE,IAC3CC,IAAKK,EAAEE,OAAOP,IAAMlF,EAAMS,iBAAiByE,KAE7C,GAAIlF,EAAMa,mBAAmB0C,OAAS,GAAKvD,EAAMyG,OAC/C,OAAQzG,EAAMyG,QACZ,KAAKL,EACH5G,KAAKyJ,gBAAgBjJ,EAAOuF,EAAGyD,GAC/B,MACF,KAAK5C,EACH5G,KAAK0J,eAAelJ,EAAOuF,EAAGyD,QAIlCxJ,KAAK2J,YAAYnJ,EAAOuF,EAAGyD,GAG7BhJ,EAAMS,iBAAmB8E,EAAEE,SAG7BnH,EAAO2K,gBAAkB,SAAUjJ,EAAOuF,EAAGyD,GAC3C,QAAuB7J,IAAnBa,EAAMqI,UAA4C,MAAlBrI,EAAMqI,SACxC,MAAM,IAAIjJ,MAAM,2BAGJY,EAAMN,QAAQ4G,YAA5B,IACI8C,EAAKjB,YAAM,CAAC5C,EAAEE,OAAOR,IAAKM,EAAEE,OAAOP,MAEjCwC,EAAI1H,EAAMqI,SAASE,QAAQhF,OAC7B8F,GAAQ7J,KAAKkH,gBAAgB1G,EAAMa,oBAAsB,GAAK6G,EAE9D4B,EAAUtJ,EAAMqI,SAASE,QAAQc,GACjCrC,EAASmB,YAAMmB,GAKfC,EAHWzF,YAAQkD,EAAQoC,GAEhBpJ,EAAMqI,SAASN,SAASsB,GAEnCzD,IAA4BL,KAC9BgE,EAAc,EAAM3B,KAAK4B,MAAMD,EAAc,IAG/C,IAAIE,EAAiBC,YAAgB1J,EAAMqI,SAASC,SAAUiB,EAAa,CACzEI,MAAO3C,EACP4C,QAAQ,IAGV5J,EAAMN,QAAQmK,eAAeJ,EAAe7F,SAASC,aAErDrE,KAAKsK,cAGPxL,EAAO4K,eAAiB,SAAUlJ,EAAOuF,EAAGyD,GAC1C,QAAsB7J,IAAlBa,EAAM4I,SAA0C,MAAjB5I,EAAM4I,QACvC,MAAM,IAAIxJ,MAAM,0BAGJY,EAAMN,QAAQ4G,YAA5B,IAEI+C,EAAO7J,KAAKkH,gBAAgB1G,EAAMa,oBAGlCyI,EAAUtJ,EAAM4I,QAAQL,QAAQc,GAChCrC,EAASmB,YAAMmB,GACfF,EAAKjB,YAAM,CAAC5C,EAAEE,OAAOR,IAAKM,EAAEE,OAAOP,MAGnC7G,EADOoG,YAASuC,EAAQoC,EAAI,CAAET,MAAO,WACtB3I,EAAM4I,QAAQH,UAAUY,GAEvCzD,IAA4BL,KAE9BlH,EAAQ,IAAOuJ,KAAK4B,MAAMnL,EAAQ,MAGpC,IAAI0L,EAAgBC,YAAehK,EAAM4I,QAAQN,SAAUjK,EAAO,CAChE4L,OAAQX,EACRM,QAAQ,IAGV5J,EAAMN,QAAQmK,eAAeE,EAAcnG,SAASC,aAEpDrE,KAAKsK,cAGPxL,EAAO6K,YAAc,SAAUnJ,EAAOuF,EAAGyD,GACvCkB,YAAa1K,KAAKC,cAAeuJ,GACjChJ,EAAMS,iBAAmB8E,EAAEE,OAE3BjG,KAAKsK,cAGPxL,EAAOwL,WAAa,WAClBtK,KAAKmC,IAAIwI,KAAKvK,IAAiBwK,OAAQ,CACrCC,OAAQzK,IAAwB0K,mBAChCC,SAAU/K,KAAKC,cAAckC,KAAI,SAAC6I,GAAD,OAAOA,EAAElE,kBAI9ChI,EAAOmM,WAAa,SAAUzK,GAExBA,EAAMW,YACRnB,KAAKsK,cAITxL,EAAOoM,WAAapM,EAAOqM,UAAY,SAAU3K,GAC3CA,EAAMW,YACRnB,KAAKsK,aAEPtK,KAAKkG,aAAa1F,IAGpB1B,EAAOsM,mBAAqB,SAAU5K,GACpCA,EAAMa,mBAAqB,GAC3BrB,KAAKyD,2BACLjD,EAAMN,QAAQmL,WAGhBvM,EAAOwM,QAAU,SAAU9K,EAAOuF,GAChC,OAAIK,IAAyBL,GAAW/F,KAAKuL,cAAc/K,EAAOuF,GAC9DK,IAAgCL,GAC3B/F,KAAKoL,mBAAmB5K,EAAOuF,GACpCK,IAAkCL,GAAW/F,KAAKwL,cAAchL,EAAOuF,QAC3E/F,KAAKkG,aAAa1F,IAGpB1B,EAAOyM,cAAgB,SAAU/K,EAAOuF,GAClCvF,EAAMQ,mBAAmBhB,KAAKyL,WAAWrL,IAAgBsL,gBAG/D5M,EAAO0M,cAAgB,SAAUhL,EAAOuF,GAClCvF,EAAMQ,mBACRhB,KAAKyL,WAAWrL,IAAgBsL,cAAe,CAC7CC,WAAY,CAAC5F,EAAEiB,cAAcpE,WAAW3D,OAI9CH,EAAO8M,QAAU,WACf5L,KAAK6L,cAAc7L,KAAK8L,mB,UCt8BtB3J,EACA4J,EACAC,EAEEC,E,WACJ,WAAYC,GAAM,oBAChB,IAAIC,EAAOnM,KACXmM,EAAKJ,KAAOG,EAAIH,KAChBI,EAAKC,QAAUF,EAAIE,SAAW,GAC9BD,EAAKE,UAAYH,EAAIH,KAAKO,MAC1BH,EAAKI,aAAeL,EAAIH,KAAKS,S,kDAEzBrK,GACJ,IAAIgK,EAAOnM,KAMX,OALAmM,EAAKhK,IAAMA,EACXgK,EAAKM,YAAcN,EAAKE,UAAUlK,GAClCgK,EAAKC,QAAQhJ,SAAQ,SAACsJ,GACpBP,EAAKQ,UAAUD,MAEVP,EAAKM,c,+BAELtK,GACP,IAAIgK,EAAOnM,KACXmM,EAAKC,QAAQhJ,SAAQ,SAACsJ,GACpBP,EAAKS,aAAaF,MAEpBP,EAAKI,aAAapK,K,gCAEV+J,GACR,IACIW,EAAWC,SAASC,cAAc,UACtCF,EAASG,UAAY,+BACjBd,EAAIe,mBAAmBC,OACzBhB,EAAIe,QAAQ7J,SAAQ,SAACyE,GACnBgF,EAASM,UAAUC,IAAIvF,MAG3BgF,EAASQ,iBAAiBnB,EAAIoB,GAAIpB,EAAIrB,QAR3B7K,KASNyM,YAAYc,YAAYV,GAC7BX,EAAIW,SAAWA,I,mCAEJX,GACXA,EAAIW,SAASW,oBAAoBtB,EAAIoB,GAAIpB,EAAIrB,QAC7CqB,EAAIW,SAASY,a,KAkIFC,MA9Hf,WAC4C,gBAAtCC,IAASC,0BACXD,IAASE,iBACP,+FACA,SAACC,GACCA,GAAOvM,QAAQe,MAAMwL,MAEvB,GAEJ,IAAIC,EAASC,iBAAO,MAEpBC,qBAAU,WACR9L,EAAM,IAAIwL,IAASO,IAAI,CACrBC,UAAWJ,EAAOK,SAAW,GAC7BC,MAAM,+DACN7G,OAAQ,CAAC,QAAS,SAClB8G,KAAM,GACNC,MAAO,EACPC,aAAa,EACbC,MAAM,EACNC,oBAAoB,EACpBC,kBAAmB,8BACnBC,iBAAkB,SAACC,GACjB,MAAO,CACLA,IAAKA,EACLC,QAAS,CACP,YACE,yuBACF,YAAa,eAKrB/C,EAAO,IAAIgD,IAAW,CACpBC,MAAM,2BACDD,IAAWC,OADX,IAEHC,gBAAiBnQ,IAEnBoQ,OAAQlQ,EACRmQ,gBAAgB,IAElBnD,EAAU,IAAIC,EAAc,CAC1BF,KAAMA,EACNK,QAAS,CACP,CACEkB,GAAI,QACJzC,OAAQuE,EACRnC,QAAS,CAAC,mBAIhB9K,EAAIkN,KAAK,QAAQ,WACflN,EAAImN,SACJnN,EAAIoN,WAAWvD,EAAS,aACxBD,EAAKyD,IAAI,CACPtQ,KAAM,oBACN6L,SAAU,CACR,CACE7L,KAAM,UACN0D,WAAY,GACZ3D,GAAI,aACJmF,SAAU,CACRlF,KAAM,UACNmF,YAAa,CACX,CACE,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,oBACpB,CAAC,mBAAoB,oBACrB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,uBAK5B,CACEpF,GAAI,cACJC,KAAM,UACN0D,WAAY,GACZwB,SAAU,CACRlF,KAAM,aACNmF,YAAa,CACX,CAAC,kBAAmB,oBACpB,CAAC,kBAAmB,kBACpB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,oBACpB,CAAC,kBAAmB,oBACpB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,+BAO/B,IAEH,IAAM+K,EAAc,WAClB,IACErD,EAAKN,WAAW,kBAAmB,CAEjC/K,UAAU,EACVC,WAAW,EACXF,UAAU,EAEVK,YAAa/B,EACbgC,YAAahC,EAEb6B,qBAAqB,EACrBC,oBAAqB,IAErBG,mBAAmB,IAErB,MAAO8M,GACP2B,MAAM3B,EAAI4B,SACVnO,QAAQe,MAAMwL,KAIlB,OACE,qBAAKd,UAAU,cAAf,SACE,qBAAK/N,GAAG,MAAM0Q,IAAK5B,OCnKV6B,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFzD,SAAS0D,eAAe,SAM1BZ,M","file":"static/js/main.aa25da39.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1pJREFUeNrElk9IVFEUxs+89yYoDAumxUgkoYIDZfaXCqfA3GSBi8poEYWzjVrUJiqiJFoJZUEQEYYRBAaFpIsgq5F0UThYZJSLdKEtgpRSQd/M6zvXe8c743vznhs78GOGmXfPd+49551zQ47j0BKtGqyV31Pg95JWs6APO8AdMOC42wToBAlg+fkLaTuMgFMgDpLgLbgKDucEOPmdnLm/4rtRXEEULtL/HgLPwBWvDSpBFhsE0UVPwHl65CWlR7uF2CKDoBndR0ZpPRmRrerXbnAWDHsJNoPLmfF3cN5NVqyJQog+PfyU7K8PhWgQY0Fr+yUKrRJxz4Bd4LOb4Buwfy55hjK/BsgsP07OxDfxPfsgnBgl2EkENRNePX+84pkUcaD6jq2qc2RuqFeiVfpOXQVzIoKQiR1LB+6FNz1O9mBrjjDvVK7pA3uzp1DoiPhYV9S26dE+BkdBreQC6OWgwrtvChFl9uBtlfM9MmX+gsa6bWQjj3LhSvBIVmGPpEVWNQvPcGBZUeSdRaUdCCTIRZNG0aTHskcV93i0RRaIEOUaYOP0aLusFkftV3miWNZUkNZZvIyr8STosCqbyJkapxAKiNMi85jSO02z429jIBKgMz1xWZtQ/+sPsmjS5eEfoD2gmOI8eA7adLH81rYsZtAy238V3CSnhCM/6wL6WA86wYRcm09S+s6Zh+Vg2qVg6gIUSFeACv+iZqV6Dxu4k6RHu8j+eINMvEdWLMG/Xwf9wGtcbAQHuZfOvj7tOlXC8bs8RWKyafQYegfJjCXnOwy6i9Yh7hc4zmLVxgKPMPkplMzyxoW5239ROTkB3nvklLtHH3cTMR0qm1Rn8RXkLjvEA1T1QXFMGFfaTl/JwLjzX5O0gxIRLE8Ue8r9VqCZyqEt7yEd1mbcDGb/EOeTF7OoWdZIFgcSLqrBMzX5TrhJa+OocG/O6zRcKQ9EBJ9axbTIv0KEFu4tRNM/5ycCTiNnYJcdE+vZeJ7KY+aFKbfWlhUVkaNqdYeFjNPBk4KvGSpYmaLs1PfqpUdkrmJCGFcHruAMXxH1Y4Njvioa0TiZpYfyr4y67QQfCgmy8ep7clpHA3adXnALjGjDOqnE/AT1C3KDdLBFTW5pk/LVYKcvdMde9k+AAQDas8HyPpQD4AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAActJREFUeNpi/P//PwMJwAWIbYH4MBDvIUUjA8giIvGy/6igmQS9RFnEA7fk1+f/v6/NQbZsGbUsAllyDGbJz73x/3+ss/r/61A2mE+KZUwEQnY6EFv+/3ib4de+BAYQDQL/3pxn+HU4h4Hh9xcQNxKIiwlFESGLQBHP8PtEJcP/b89R4xZo6e+zrSjq8AEWAvKg1CXPJOcJNPgOAyO3JMPfOysZmCTtIK4UMUBWR1Gqc0GOeVBCAMURWoIAARNK4wiUV1yBuAlZkJGVB8YsAWJTID5DrXzkAkt5f1+fI8knpOQjbBn2GimWgDAjiUWQIBAbQCP/DykaSbWIbMDEQCdAjkUGtLYoGYiPAfF5KK1Di2oiGZbc/n24BWM+A2IRYlMdMT4ygZVlf4BlG6hw/ff8EIgrSUwZR2zQgSw5DcTxYN9DC9Z/H27D5NdBg5Fii+pBBKggBWE4+POV4c/1ubBqw5KYaoJQPvoAxPw/t7jD6h5UVwJLcVaLdhBzIxAHUOIjcPHPZjuFgQFRkEJcyK/KwKKZRLVqQgZWlYNS24/NbuBqAlSlI1Xlx6hVqKJY9ut4BcntBVJKb7hl5LSAyCm9i5EakL2kaAQIMAAP/aLE8VYEBwAAAABJRU5ErkJggg==\"","import * as Constants from '@mapbox/mapbox-gl-draw/src/constants';\nimport doubleClickZoom from '@mapbox/mapbox-gl-draw/src/lib/double_click_zoom';\nimport createSupplementaryPoints from '@mapbox/mapbox-gl-draw/src/lib/create_supplementary_points';\nimport * as CommonSelectors from '@mapbox/mapbox-gl-draw/src/lib/common_selectors';\nimport moveFeatures from '@mapbox/mapbox-gl-draw/src/lib/move_features';\n\nimport { lineString, point } from '@turf/helpers';\nimport bearing from '@turf/bearing';\nimport center from '@turf/center';\nimport midpoint from '@turf/midpoint';\nimport distance from '@turf/distance';\nimport destination from '@turf/destination';\nimport transformRotate from '@turf/transform-rotate';\nimport transformScale from '@turf/transform-scale';\n\nvar rotate = require('./img/rotate.png');\nvar scale = require('./img/scale.png');\n\nexport const SRMode = {}; //scale rotate mode\n\nexport const SRCenter = {\n  Center: 0, // rotate or scale around center of polygon\n  Opposite: 1, // rotate or scale around opposite side of polygon\n};\n\nexport const SRStyle = [\n  {\n    id: 'gl-draw-polygon-fill-inactive',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'user_type', 'overlay'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'fill-color': '#3bb2d0',\n      'fill-outline-color': '#3bb2d0',\n      'fill-opacity': 0.2,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-fill-active',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'true'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'user_type', 'overlay'],\n    ],\n    paint: {\n      'fill-color': '#fbb03b',\n      'fill-outline-color': '#fbb03b',\n      'fill-opacity': 0.2,\n    },\n  },\n\n  {\n    id: 'gl-draw-overlay-polygon-fill-inactive',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['==', 'user_type', 'overlay'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'fill-color': '#3bb2d0',\n      'fill-outline-color': '#3bb2d0',\n      'fill-opacity': 0.01,\n    },\n  },\n  {\n    id: 'gl-draw-overlay-polygon-fill-active',\n    type: 'fill',\n    filter: [\n      'all',\n      ['==', 'active', 'true'],\n      ['==', '$type', 'Polygon'],\n      ['==', 'user_type', 'overlay'],\n    ],\n    paint: {\n      'fill-color': '#fbb03b',\n      'fill-outline-color': '#fbb03b',\n      'fill-opacity': 0.01,\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-stroke-inactive',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'user_type', 'overlay'],\n      ['!=', 'mode', 'static'],\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#3bb2d0',\n      'line-width': 2,\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-stroke-active',\n    type: 'line',\n    filter: ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2,\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-midpoint',\n    type: 'circle',\n    filter: ['all', ['==', '$type', 'Point'], ['==', 'meta', 'midpoint']],\n    paint: {\n      'circle-radius': 3,\n      'circle-color': '#fbb03b',\n    },\n  },\n\n  {\n    id: 'gl-draw-line-inactive',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'LineString'],\n      ['!=', 'mode', 'static'],\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#3bb2d0',\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-line-active',\n    type: 'line',\n    filter: ['all', ['==', '$type', 'LineString'], ['==', 'active', 'true']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-and-line-vertex-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 2,\n      'circle-color': '#fbb03b',\n    },\n  },\n\n  {\n    id: 'gl-draw-polygon-and-line-vertex-scale-icon',\n    type: 'symbol',\n    filter: [\n      'all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n      ['has', 'heading'],\n    ],\n    layout: {\n      'icon-image': 'scale',\n      'icon-allow-overlap': true,\n      'icon-ignore-placement': true,\n      'icon-rotation-alignment': 'map',\n      'icon-rotate': ['get', 'heading'],\n    },\n    paint: {\n      'icon-opacity': 1.0,\n      'icon-opacity-transition': {\n        delay: 0,\n        duration: 0,\n      },\n    },\n  },\n\n  {\n    id: 'gl-draw-point-point-stroke-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 5,\n      'circle-opacity': 1,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-point-inactive',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 3,\n      'circle-color': '#3bb2d0',\n    },\n  },\n  {\n    id: 'gl-draw-point-stroke-active',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', '$type', 'Point'],\n      ['==', 'active', 'true'],\n      ['!=', 'meta', 'midpoint'],\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-point-active',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', '$type', 'Point'],\n      ['!=', 'meta', 'midpoint'],\n      ['==', 'active', 'true'],\n    ],\n    paint: {\n      'circle-radius': 2,\n      'circle-color': '#fbb03b',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-fill-static',\n    type: 'fill',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    paint: {\n      'fill-color': '#404040',\n      'fill-outline-color': '#404040',\n      'fill-opacity': 0.1,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-stroke-static',\n    type: 'line',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#404040',\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-line-static',\n    type: 'line',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'LineString']],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#404040',\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-point-static',\n    type: 'circle',\n    filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Point']],\n    paint: {\n      'circle-radius': 5,\n      'circle-color': '#404040',\n    },\n  },\n\n  // {\n  //     'id': 'gl-draw-polygon-rotate-point',\n  //     'type': 'circle',\n  //     'filter': ['all',\n  //         ['==', '$type', 'Point'],\n  //         ['==', 'meta', 'rotate_point']],\n  //     'paint': {\n  //         'circle-radius': 5,\n  //         'circle-color': '#fbb03b'\n  //     }\n  // },\n\n  {\n    id: 'gl-draw-line-rotate-point',\n    type: 'line',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'LineString'],\n      ['!=', 'mode', 'static'],\n      // ['==', 'active', 'true']\n    ],\n    layout: {\n      'line-cap': 'round',\n      'line-join': 'round',\n    },\n    paint: {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2,\n    },\n  },\n  {\n    id: 'gl-draw-polygon-rotate-point-stroke',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 4,\n      'circle-color': '#fff',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-rotate-point',\n    type: 'circle',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    paint: {\n      'circle-radius': 2,\n      'circle-color': '#fbb03b',\n    },\n  },\n  {\n    id: 'gl-draw-polygon-rotate-point-icon',\n    type: 'symbol',\n    filter: [\n      'all',\n      ['==', 'meta', 'midpoint'],\n      ['==', 'icon', 'rotate'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static'],\n    ],\n    layout: {\n      'icon-image': 'rotate',\n      'icon-allow-overlap': true,\n      'icon-ignore-placement': true,\n      'icon-rotation-alignment': 'map',\n      'icon-rotate': ['get', 'heading'],\n    },\n    paint: {\n      'icon-opacity': 1.0,\n      'icon-opacity-transition': {\n        delay: 0,\n        duration: 0,\n      },\n    },\n  },\n];\n\nfunction parseSRCenter(value, defaultSRCenter = SRCenter.Center) {\n  if (value == undefined || value == null) return defaultSRCenter;\n\n  if (value === SRCenter.Center || value === SRCenter.Opposite) return value;\n\n  if (value == 'center') return SRCenter.Center;\n\n  if (value == 'opposite') return SRCenter.Opposite;\n\n  throw Error('Invalid SRCenter: ' + value);\n}\n\n/*\n    opts = {\n        featureId: ...,\n\n        canScale: default true,\n        canRotate: default true,\n\n        rotatePivot: default 'center' or 'opposite',\n        scaleCenter: default 'center' or 'opposite',\n\n        canSelectFeatures: default true,    // can exit to simple_select mode\n    }\n */\nSRMode.onSetup = function (opts) {\n  const featureId = this.getSelected()[0].id;\n\n  const feature = this.getFeature(featureId);\n\n  if (!feature) {\n    throw new Error('You must provide a valid featureId to enter SRMode');\n  }\n\n  if (\n    feature.type === Constants.geojsonTypes.POINT ||\n    feature.type === Constants.geojsonTypes.MULTI_POINT\n  ) {\n    throw new TypeError('SRMode can not handle points');\n  }\n  //   if (\n  //     feature.coordinates === undefined ||\n  //     feature.coordinates.length != 1 ||\n  //     feature.coordinates[0].length <= 2\n  //   ) {\n  //     throw new TypeError('SRMode can only handle polygons');\n  //   }\n\n  const state = {\n    featureId,\n    feature,\n\n    canTrash: opts.canTrash != undefined ? opts.canTrash : true,\n\n    canScale: opts.canScale != undefined ? opts.canScale : true,\n    canRotate: opts.canRotate != undefined ? opts.canRotate : true,\n\n    singleRotationPoint:\n      opts.singleRotationPoint != undefined ? opts.singleRotationPoint : false,\n    rotationPointRadius:\n      opts.rotationPointRadius != undefined ? opts.rotationPointRadius : 1.0,\n\n    rotatePivot: parseSRCenter(opts.rotatePivot, SRCenter.Center),\n    scaleCenter: parseSRCenter(opts.scaleCenter, SRCenter.Center),\n\n    canSelectFeatures:\n      opts.canSelectFeatures != undefined ? opts.canSelectFeatures : true,\n    // selectedFeatureMode: opts.selectedFeatureMode != undefined ? opts.selectedFeatureMode : 'simple_select',\n\n    dragMoveLocation: opts.startPos || null,\n    dragMoving: false,\n    canDragMove: false,\n    selectedCoordPaths: opts.coordPath ? [opts.coordPath] : [],\n  };\n\n  if (!(state.canRotate || state.canScale)) {\n    console.warn('Non of canScale or canRotate is true');\n  }\n\n  this.setSelectedCoordinates(\n    this.pathsToCoordinates(featureId, state.selectedCoordPaths)\n  );\n  this.setSelected(featureId);\n  doubleClickZoom.disable(this);\n\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.canTrash,\n  });\n\n  var _this = this;\n  this.map.loadImage(rotate.default, function (error, image) {\n    if (error) throw error;\n    _this.map.addImage('rotate', image);\n  });\n  this.map.loadImage(scale.default, function (error, image) {\n    if (error) throw error;\n    _this.map.addImage('scale', image);\n  });\n\n  return state;\n};\n\nSRMode.toDisplayFeatures = function (state, geojson, push) {\n  if (state.featureId === geojson.properties.id) {\n    geojson.properties.active = Constants.activeStates.ACTIVE;\n    push(geojson);\n\n    var suppPoints = createSupplementaryPoints(geojson, {\n      map: this.map,\n      midpoints: false,\n      selectedPaths: state.selectedCoordPaths,\n    });\n\n    if (state.canScale) {\n      this.computeBisectrix(suppPoints);\n      suppPoints.forEach(push);\n    }\n\n    if (state.canRotate) {\n      var rotPoints = this.createRotationPoints(state, geojson, suppPoints);\n      rotPoints.forEach(push);\n    }\n  } else {\n    geojson.properties.active = Constants.activeStates.INACTIVE;\n    push(geojson);\n  }\n\n  // this.fireActionable(state);\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.canTrash,\n  });\n\n  // this.fireUpdate();\n};\n\nSRMode.onStop = function () {\n  doubleClickZoom.enable(this);\n  this.clearSelectedCoordinates();\n};\n\n// TODO why I need this?\nSRMode.pathsToCoordinates = function (featureId, paths) {\n  return paths.map((coord_path) => {\n    return { feature_id: featureId, coord_path };\n  });\n};\n\nSRMode.computeBisectrix = function (points) {\n  for (var i1 = 0; i1 < points.length; i1++) {\n    var i0 = (i1 - 1 + points.length) % points.length;\n    var i2 = (i1 + 1) % points.length;\n\n    var l1 = lineString([\n      points[i0].geometry.coordinates,\n      points[i1].geometry.coordinates,\n    ]);\n    var l2 = lineString([\n      points[i1].geometry.coordinates,\n      points[i2].geometry.coordinates,\n    ]);\n    var a1 = bearing(\n      points[i0].geometry.coordinates,\n      points[i1].geometry.coordinates\n    );\n    var a2 = bearing(\n      points[i2].geometry.coordinates,\n      points[i1].geometry.coordinates\n    );\n\n    var a = (a1 + a2) / 2.0;\n\n    if (a < 0.0) a += 360;\n    if (a > 360) a -= 360;\n\n    points[i1].properties.heading = a;\n  }\n};\n\nSRMode._createRotationPoint = function (\n  rotationWidgets,\n  featureId,\n  v1,\n  v2,\n  rotCenter,\n  radiusScale\n) {\n  var cR0 = midpoint(v1, v2).geometry.coordinates;\n  var heading = bearing(rotCenter, cR0);\n  var distance0 = distance(rotCenter, cR0);\n  var distance1 = radiusScale * distance0; // TODO depends on map scale\n  var cR1 = destination(rotCenter, distance1, heading, {}).geometry.coordinates;\n\n  rotationWidgets.push({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      meta: Constants.meta.MIDPOINT,\n      icon: 'rotate',\n      parent: featureId,\n      lng: cR1[0],\n      lat: cR1[1],\n      coord_path: v1.properties.coord_path,\n      heading: heading,\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POINT,\n      coordinates: cR1,\n    },\n  });\n};\n\nSRMode.createRotationPoints = function (state, geojson, suppPoints) {\n  const { type, coordinates } = geojson.geometry;\n  const featureId = geojson.properties && geojson.properties.id;\n\n  let rotationWidgets = [];\n  if (\n    type === Constants.geojsonTypes.POINT ||\n    type === Constants.geojsonTypes.MULTI_POINT\n  ) {\n    return;\n  }\n\n  var corners = suppPoints.slice(0);\n  corners[corners.length] = corners[0];\n\n  var v1 = null;\n\n  var rotCenter = this.computeRotationCenter(state, geojson);\n\n  if (state.singleRotationPoint) {\n    this._createRotationPoint(\n      rotationWidgets,\n      featureId,\n      corners[0],\n      corners[1],\n      rotCenter,\n      state.rotationPointRadius\n    );\n  } else {\n    corners.forEach((v2) => {\n      if (v1 != null) {\n        this._createRotationPoint(\n          rotationWidgets,\n          featureId,\n          v1,\n          v2,\n          rotCenter,\n          state.rotationPointRadius\n        );\n      }\n\n      v1 = v2;\n    });\n  }\n  return rotationWidgets;\n};\n\nSRMode.startDragging = function (state, e) {\n  this.map.dragPan.disable();\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nSRMode.stopDragging = function (state) {\n  this.map.dragPan.enable();\n  state.dragMoving = false;\n  state.canDragMove = false;\n  state.dragMoveLocation = null;\n};\n\nconst isRotatePoint = CommonSelectors.isOfMetaType(Constants.meta.MIDPOINT);\nconst isVertex = CommonSelectors.isOfMetaType(Constants.meta.VERTEX);\n\nSRMode.onTouchStart = SRMode.onMouseDown = function (state, e) {\n  if (isVertex(e)) return this.onVertex(state, e);\n  if (isRotatePoint(e)) return this.onRotatePoint(state, e);\n  if (CommonSelectors.isActiveFeature(e)) return this.onFeature(state, e);\n  // if (isMidpoint(e)) return this.onMidpoint(state, e);\n};\n\nconst TxMode = {\n  Scale: 1,\n  Rotate: 2,\n};\n\nSRMode.onVertex = function (state, e) {\n  // convert internal MapboxDraw feature to valid GeoJSON:\n  this.computeAxes(state, state.feature.toGeoJSON());\n\n  this.startDragging(state, e);\n  const about = e.featureTarget.properties;\n  state.selectedCoordPaths = [about.coord_path];\n  state.txMode = TxMode.Scale;\n};\n\nSRMode.onRotatePoint = function (state, e) {\n  // convert internal MapboxDraw feature to valid GeoJSON:\n  this.computeAxes(state, state.feature.toGeoJSON());\n\n  this.startDragging(state, e);\n  const about = e.featureTarget.properties;\n  state.selectedCoordPaths = [about.coord_path];\n  state.txMode = TxMode.Rotate;\n};\n\nSRMode.onFeature = function (state, e) {\n  state.selectedCoordPaths = [];\n  this.startDragging(state, e);\n};\n\nSRMode.coordinateIndex = function (coordPaths) {\n  if (coordPaths.length >= 1) {\n    var parts = coordPaths[0].split('.');\n    return parseInt(parts[parts.length - 1]);\n  } else {\n    return 0;\n  }\n};\n\nSRMode.computeRotationCenter = function (state, polygon) {\n  var center0 = center(polygon);\n  return center0;\n};\n\nSRMode.computeAxes = function (state, polygon) {\n  // TODO check min 3 points\n  const center0 = this.computeRotationCenter(state, polygon);\n  let corners;\n  if (polygon.geometry.type === Constants.geojsonTypes.POLYGON)\n    corners = polygon.geometry.coordinates[0].slice(0);\n  else if (polygon.geometry.type === Constants.geojsonTypes.MULTI_POLYGON) {\n    let temp = [];\n    polygon.geometry.coordinates.forEach((c) => {\n      c.forEach((c2) => {\n        c2.forEach((c3) => {\n          temp.push(c3);\n        });\n      });\n    });\n    corners = temp;\n  } else if (polygon.geometry.type === Constants.geojsonTypes.LINE_STRING)\n    corners = polygon.geometry.coordinates;\n  else if (polygon.geometry.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n    let temp = [];\n    polygon.geometry.coordinates.forEach((c) => {\n      c.forEach((c2) => {\n        temp.push(c2);\n      });\n    });\n    corners = temp;\n  }\n\n  const n = corners.length - 1;\n  const iHalf = Math.floor(n / 2);\n\n  var rotateCenters = [];\n  var headings = [];\n\n  for (var i1 = 0; i1 < n; i1++) {\n    var i0 = i1 - 1;\n    if (i0 < 0) i0 += n;\n\n    const c0 = corners[i0];\n    const c1 = corners[i1];\n    const rotPoint = midpoint(point(c0), point(c1));\n\n    var rotCenter = center0;\n    if (SRCenter.Opposite === state.rotatePivot) {\n      var i3 = (i1 + iHalf) % n; // opposite corner\n      var i2 = i3 - 1;\n      if (i2 < 0) i2 += n;\n\n      const c2 = corners[i2];\n      const c3 = corners[i3];\n      rotCenter = midpoint(point(c2), point(c3));\n    }\n\n    rotateCenters[i1] = rotCenter.geometry.coordinates;\n    headings[i1] = bearing(rotCenter, rotPoint);\n  }\n\n  state.rotation = {\n    feature0: polygon, // initial feature state\n    centers: rotateCenters,\n    headings: headings, // rotation start heading for each point\n  };\n\n  // compute current distances from centers for scaling\n\n  var scaleCenters = [];\n  var distances = [];\n  for (var i = 0; i < n; i++) {\n    var c1 = corners[i];\n    var c0 = center0.geometry.coordinates;\n    if (SRCenter.Opposite === state.scaleCenter) {\n      var i2 = (i + iHalf) % n; // opposite corner\n      c0 = corners[i2];\n    }\n    scaleCenters[i] = c0;\n    distances[i] = distance(point(c0), point(c1), { units: 'meters' });\n  }\n\n  state.scaling = {\n    feature0: polygon, // initial feature state\n    centers: scaleCenters,\n    distances: distances,\n  };\n};\n\nSRMode.onDrag = function (state, e) {\n  if (state.canDragMove !== true) return;\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat,\n  };\n  if (state.selectedCoordPaths.length > 0 && state.txMode) {\n    switch (state.txMode) {\n      case TxMode.Rotate:\n        this.dragRotatePoint(state, e, delta);\n        break;\n      case TxMode.Scale:\n        this.dragScalePoint(state, e, delta);\n        break;\n    }\n  } else {\n    this.dragFeature(state, e, delta);\n  }\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSRMode.dragRotatePoint = function (state, e, delta) {\n  if (state.rotation === undefined || state.rotation == null) {\n    throw new Error('state.rotation required');\n  }\n\n  var polygon = state.feature.toGeoJSON();\n  var m1 = point([e.lngLat.lng, e.lngLat.lat]);\n\n  const n = state.rotation.centers.length;\n  var cIdx = (this.coordinateIndex(state.selectedCoordPaths) + 1) % n;\n  // TODO validate cIdx\n  var cCenter = state.rotation.centers[cIdx];\n  var center = point(cCenter);\n\n  var heading1 = bearing(center, m1);\n\n  var heading0 = state.rotation.headings[cIdx];\n  var rotateAngle = heading1 - heading0; // in degrees\n  if (CommonSelectors.isShiftDown(e)) {\n    rotateAngle = 5.0 * Math.round(rotateAngle / 5.0);\n  }\n\n  var rotatedFeature = transformRotate(state.rotation.feature0, rotateAngle, {\n    pivot: center,\n    mutate: false,\n  });\n\n  state.feature.incomingCoords(rotatedFeature.geometry.coordinates);\n  // TODO add option for this:\n  this.fireUpdate();\n};\n\nSRMode.dragScalePoint = function (state, e, delta) {\n  if (state.scaling === undefined || state.scaling == null) {\n    throw new Error('state.scaling required');\n  }\n\n  var polygon = state.feature.toGeoJSON();\n\n  var cIdx = this.coordinateIndex(state.selectedCoordPaths);\n  // TODO validate cIdx\n\n  var cCenter = state.scaling.centers[cIdx];\n  var center = point(cCenter);\n  var m1 = point([e.lngLat.lng, e.lngLat.lat]);\n\n  var dist = distance(center, m1, { units: 'meters' });\n  var scale = dist / state.scaling.distances[cIdx];\n\n  if (CommonSelectors.isShiftDown(e)) {\n    // TODO discrete scaling\n    scale = 0.05 * Math.round(scale / 0.05);\n  }\n\n  var scaledFeature = transformScale(state.scaling.feature0, scale, {\n    origin: cCenter,\n    mutate: false,\n  });\n\n  state.feature.incomingCoords(scaledFeature.geometry.coordinates);\n  // TODO add option for this:\n  this.fireUpdate();\n};\n\nSRMode.dragFeature = function (state, e, delta) {\n  moveFeatures(this.getSelected(), delta);\n  state.dragMoveLocation = e.lngLat;\n  // TODO add option for this:\n  this.fireUpdate();\n};\n\nSRMode.fireUpdate = function () {\n  this.map.fire(Constants.events.UPDATE, {\n    action: Constants.updateActions.CHANGE_COORDINATES,\n    features: this.getSelected().map((f) => f.toGeoJSON()),\n  });\n};\n\nSRMode.onMouseOut = function (state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n};\n\nSRMode.onTouchEnd = SRMode.onMouseUp = function (state) {\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n  this.stopDragging(state);\n};\n\nSRMode.clickActiveFeature = function (state) {\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  state.feature.changed();\n};\n\nSRMode.onClick = function (state, e) {\n  if (CommonSelectors.noTarget(e)) return this.clickNoTarget(state, e);\n  if (CommonSelectors.isActiveFeature(e))\n    return this.clickActiveFeature(state, e);\n  if (CommonSelectors.isInactiveFeature(e)) return this.clickInactive(state, e);\n  this.stopDragging(state);\n};\n\nSRMode.clickNoTarget = function (state, e) {\n  if (state.canSelectFeatures) this.changeMode(Constants.modes.SIMPLE_SELECT);\n};\n\nSRMode.clickInactive = function (state, e) {\n  if (state.canSelectFeatures)\n    this.changeMode(Constants.modes.SIMPLE_SELECT, {\n      featureIds: [e.featureTarget.properties.id],\n    });\n};\n\nSRMode.onTrash = function () {\n  this.deleteFeature(this.getSelectedIds());\n  // this.fireActionable();\n};\n","import React, { useRef, useEffect } from 'react';\nimport mapboxGl from 'mapbox-gl';\nimport MapboxDraw from '@mapbox/mapbox-gl-draw';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport { SRMode, SRCenter, SRStyle } from 'mapbox-gl-draw-scale-rotate-mode';\nimport './App.css';\n\nlet map;\nlet draw;\nlet drawBar;\n\nclass extendDrawBar {\n  constructor(opt) {\n    let ctrl = this;\n    ctrl.draw = opt.draw;\n    ctrl.buttons = opt.buttons || [];\n    ctrl.onAddOrig = opt.draw.onAdd;\n    ctrl.onRemoveOrig = opt.draw.onRemove;\n  }\n  onAdd(map) {\n    let ctrl = this;\n    ctrl.map = map;\n    ctrl.elContainer = ctrl.onAddOrig(map);\n    ctrl.buttons.forEach((b) => {\n      ctrl.addButton(b);\n    });\n    return ctrl.elContainer;\n  }\n  onRemove(map) {\n    let ctrl = this;\n    ctrl.buttons.forEach((b) => {\n      ctrl.removeButton(b);\n    });\n    ctrl.onRemoveOrig(map);\n  }\n  addButton(opt) {\n    let ctrl = this;\n    var elButton = document.createElement('button');\n    elButton.className = 'mapbox-gl-draw_ctrl-draw-btn';\n    if (opt.classes instanceof Array) {\n      opt.classes.forEach((c) => {\n        elButton.classList.add(c);\n      });\n    }\n    elButton.addEventListener(opt.on, opt.action);\n    ctrl.elContainer.appendChild(elButton);\n    opt.elButton = elButton;\n  }\n  removeButton(opt) {\n    opt.elButton.removeEventListener(opt.on, opt.action);\n    opt.elButton.remove();\n  }\n}\n\nfunction App() {\n  if (mapboxGl.getRTLTextPluginStatus() === 'unavailable')\n    mapboxGl.setRTLTextPlugin(\n      'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js',\n      (err) => {\n        err && console.error(err);\n      },\n      true\n    );\n  let mapRef = useRef(null);\n\n  useEffect(() => {\n    map = new mapboxGl.Map({\n      container: mapRef.current || '',\n      style: `https://map.ir/vector/styles/main/mapir-xyz-light-style.json`,\n      center: [51.3857, 35.6102],\n      zoom: 10,\n      pitch: 0,\n      interactive: true,\n      hash: true,\n      attributionControl: true,\n      customAttribution: '© Map © Openstreetmap',\n      transformRequest: (url) => {\n        return {\n          url: url,\n          headers: {\n            'x-api-key':\n              'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A', //dev api key\n            'Mapir-SDK': 'reactjs',\n          },\n        };\n      },\n    });\n    draw = new MapboxDraw({\n      modes: {\n        ...MapboxDraw.modes,\n        scaleRotateMode: SRMode,\n      },\n      styles: SRStyle,\n      userProperties: true,\n    });\n    drawBar = new extendDrawBar({\n      draw: draw,\n      buttons: [\n        {\n          on: 'click',\n          action: scaleRotate,\n          classes: ['rotate-icon'],\n        },\n      ],\n    });\n    map.once('load', () => {\n      map.resize();\n      map.addControl(drawBar, 'top-right');\n      draw.set({\n        type: 'FeatureCollection',\n        features: [\n          {\n            type: 'Feature',\n            properties: {},\n            id: 'example-id',\n            geometry: {\n              type: 'Polygon',\n              coordinates: [\n                [\n                  [51.41742415918904, 35.73019558439101],\n                  [51.31319413385742, 35.702773908694724],\n                  [51.378997493472525, 35.665562843119986],\n                  [51.45008537540798, 35.67776544979942],\n                  [51.46619566741822, 35.70822028156377],\n                  [51.41742415918904, 35.73019558439101],\n                ],\n              ],\n            },\n          },\n          {\n            id: 'example2_id',\n            type: 'Feature',\n            properties: {},\n            geometry: {\n              type: 'LineString',\n              coordinates: [\n                [51.46717071533203, 35.752642192392955],\n                [51.41704559326172, 35.7715862712587],\n                [51.37207031249999, 35.73954585450408],\n                [51.31988525390625, 35.753756674845675],\n                [51.29344940185547, 35.713904233681035],\n                [51.37035369873047, 35.67012719291238],\n                [51.32434844970703, 35.633581468816594],\n              ],\n            },\n          },\n        ],\n      });\n    });\n  }, []);\n\n  const scaleRotate = () => {\n    try {\n      draw.changeMode('scaleRotateMode', {\n        // required\n        canScale: true,\n        canRotate: true, // only rotation enabled\n        canTrash: false, // disable feature delete\n\n        rotatePivot: SRCenter.Center, // rotate around center\n        scaleCenter: SRCenter.Opposite, // scale around opposite vertex\n\n        singleRotationPoint: true, // only one rotation point\n        rotationPointRadius: 1.2, // offset rotation point\n\n        canSelectFeatures: true,\n      });\n    } catch (err) {\n      alert(err.message);\n      console.error(err);\n    }\n  };\n\n  return (\n    <div className=\"map-wrapper\">\n      <div id=\"map\" ref={mapRef} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}